To run, first compile with -O3:
make fast

Then use the following console command to generate data:
valgrind --tool=callgrind ./toy quiet

Then to visualize the data:
kcachegrind

If you don't want to install kcachegrind, instead replace 63376 with the appropriate number, and run
callgrind_annotate callgrind.out.63376 >profile

The results will be in the file "profile".

Note: the "prof" tool doesn't work on VMware, so that's why I use callgrind.